/**
 * ATT eDM Data Manager Configuration File (Data Definition)
 * Version - 20180620.0 prod 
 * ATT Proprietary and Confidential
 */

/*  Common variable naming conventions
 * variables: leading underscore or dollar sign indicates an internal-only attribute
 * functions: leading underscore indicates an internal-only member, typically used to wrap functionality
 * functions: leading dollar sign indicates an special internal member, typically contains actual functionality. It should only be called by the same-named member with a leading underscore.
 * often there will be same-named members, differentiated by the leading character.
 * for example: setVar, _setVar, $setVar
 *      $setVar (leading dollar sign) is private and contains the actual functionality for setting a data layer variable
 *      _setVar (leading underscore) is private and wraps the $setVar function for use by other members within the API. This is done to differentiate internally-called private members from externally-called public members.
 *      setVar (no leading character) is the public access function. It calls the private $setVar function.
 */
function isIE(e,t){var n,c="IE",d=document.createElement("B"),i=document.documentElement;return e&&(c+=" "+e,t&&(c=t+" "+c)),d.innerHTML="\x3c!--[if "+c+']><b id="iecctest"></b><![endif]--\x3e',i.appendChild(d),n=!!document.getElementById("iecctest"),i.removeChild(d),n}!function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null!==c){var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)}else(b._state?a.resolve:a.reject)(b._value)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k="function"==typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype.catch=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new function(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0==--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},"undefined"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);var DMviaDM=!0;function edmDataManager(ini){var $me=this,$config=ini;void 0===$config.passThroughDefinitions&&($config.passThroughDefinitions=[]),void 0===$config.settings&&($config.settings={});var $ddo={},_eventsToBeProcessed=[],_TouchCommerceQueue=[],_eventHandlers={},_oImpressions={},_consoleLog={dataLayer:{},dmLogs:{},dtmLogs:{}},_eventOrder=0,_tcObj=null;window.addEventListener("INQ-DETM-READY",function(e){void 0!==e&&void 0!==e.detail&&void 0!==e.detail["inq-object"]&&(_tcObj=e.detail["inq-object"])});var _allowedInPrototype=["_default","loadAt","dataType","passThrough","rules","dynamicDefault"],_requiredInPrototype=["dataType"],cacheDebug2Mode="$ddo.settings.debug2Mode",consoleDown=Array(11).join(String.fromCharCode("9660")),consoleUp=Array(11).join(String.fromCharCode("9650")),noConsole="undefined"==typeof console||void 0===console.log||void 0===console.warn||-1!=navigator.appName.indexOf("Internet Explorer")&&-1==navigator.appVersion.indexOf("MSIE 1"),advancedConsole="undefined"!=typeof console&&"function"==typeof console.table&&"function"==typeof console.group&&"function"==typeof console.groupCollapsed&&"function"==typeof console.groupEnd&&(-1!==window.navigator.userAgent.indexOf("Chrome/")||-1!==window.navigator.userAgent.indexOf("Firefox/")),edmEventApi=function(analytics_event){this.analytics_event=analytics_event,this.isModal=function(){var isModal=!1;return"pageLoad"===this.analytics_event.eventAction&&(isModal=-1!==this.analytics_event._evtPageName.indexOf("mdl")||-1!==this.analytics_event._evtPageName.indexOf("Mdl")||-1!==this.analytics_event._evtPageName.indexOf("Modal Pg")),isModal},this.getCustomEventName=function(){for(var customEventName="",i=0;i<edmEventApi.messageMap.length;i++){var mapping=edmEventApi.messageMap[i];if(mapping.eventAction==this.analytics_event.eventAction){customEventName=mapping.customEventName;break}}return customEventName}};edmEventApi.messageMap=[{eventAction:"pageLoad",customEventName:"DM_EVENT_PAGELOAD"}];var makeSafe=function(fn){return function(){try{return fn.apply(this,arguments)}catch(e){return warn(e),!1}}},doSessionStorage=makeSafe(function(fn){return function(){if("undefined"!=typeof sessionStorage)return fn.apply(this,arguments);throw"doSessionStorage: sessionStorage not supported on this browser."}});this.ext={},this.ext.strSplit=makeSafe(function(list,delim){return list.split(delim)}),this.ext.strListAppend=makeSafe(function(list,val,delim){return arrItems=list.split(delim),arrItems.push(val),arrItems.join(delim)}),this.ext.arrJoin=makeSafe(function(list,delim){return list.join(delim)}),this.ext.strReplace=makeSafe(function(orig,searchValue,newValue){return orig.replace(new RegExp(searchValue,"g"),newValue)}),this.ext.getParameterByName=makeSafe(function(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}),this.ext.getCookie=makeSafe(function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(-1!=c.indexOf(name))return c.substring(name.length,c.length)}return""}),this.ext.setCookie=makeSafe(function(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires});var findChar=makeSafe(function(x,str,start){void 0===start&&(start=0);for(var i=start;i<=str.length;i++)if(str[i]===x[0]){for(var matched=!0,n=0;n<x.length;n++)str[i+n]===x[n]||(matched=!1);if(!0===matched)return i}return-1});Array.prototype.indexOf||(Array.prototype.indexOf=function(needle){for(var i=0;i<this.length;i++)if(this[i]===needle)return i;return-1}),Object.size=function(obj){var key,size=0;for(key in obj)obj.hasOwnProperty(key)&&size++;return size},emptyObject=makeSafe(function(obj){if(obj instanceof Array)obj=[];else if("object"==typeof obj)for(var member in obj)delete obj[member];return obj}),this.log=makeSafe(function(){if(!noConsole){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);console.log.apply(console,args)}}),this.setConsoleLog=makeSafe(function(msg,source){var size=0;void 0===source&&(source="dataLayer"),void 0===msg&&(msg="no msg provided"),"dm"==(source=source.toLowerCase())?(size=Object.size(_consoleLog.dmLogs),_consoleLog.dmLogs[size]=msg):"dtm"==source?(size=Object.size(_consoleLog.dtmLogs),_consoleLog.dtmLogs[size]=msg):(size=Object.size(_consoleLog.dataLayer),_consoleLog.dataLayer[size]=msg)}),this.getConsoleLog=makeSafe(function(logType){return void 0===logType&&(logType=""),logType=logType.toLowerCase(),_consoleLog.dataLayer=getFlatDataLayer(),"datalayer"==logType?_consoleLog.dataLayer:"dmlogs"==logType?_consoleLog.dmLogs:"dtmlogs"==logType?_consoleLog.dtmLogs:_consoleLog});var $clearConsoleLog=makeSafe(function(logType){return void 0===logType&&(logType=""),logType=logType.toLowerCase(),_consoleLog.dataLayer=getFlatDataLayer(),"datalayer"==logType?_consoleLog.dataLayer=emptyObject(_consoleLog.dataLayer):"dmlogs"==logType?_consoleLog.dmLogs=emptyObject(_consoleLog.dmLogs):"dtmlogs"==logType?_consoleLog.dtmLogs=emptyObject(_consoleLog.dtmLogs):(_consoleLog.dataLayer=emptyObject(_consoleLog.dataLayer),_consoleLog.dmLogs=emptyObject(_consoleLog.dmLogs),_consoleLog.dmLogs=emptyObject(_consoleLog.dtmLogs)),{}});this.debug=doSessionStorage(function(opt){var debugMode=$me.checkDebug2();return"_all"===opt?window.sessionStorage.setItem(cacheDebug2Mode,advancedConsole?"4":"2"):null===debugMode||"0"===debugMode?window.sessionStorage.setItem(cacheDebug2Mode,advancedConsole?"3":"1"):window.sessionStorage.setItem(cacheDebug2Mode,"0"),$me.checkDebug2()}),this.debug2=this.debug,this.enableTest=doSessionStorage(function(enabled){return void 0!==enabled&&"private"===enabled?(sessionStorage.setItem("$ddo.settings.testingEnabled","private"),createDebugFunctions(),$me.squawk("Hidden testing functions enabled.",1),!0):(null!==sessionStorage.getItem("$ddo.settings.testingEnabled")&&sessionStorage.removeItem("$ddo.settings.testingEnabled"),destroyDebugFunctions(),!1)}),this.checkDebug=doSessionStorage(function(){return window.sessionStorage.getItem("$ddo.settings.debugMode")}),this.checkDebug2=doSessionStorage(function(){var debugMode=window.sessionStorage.getItem(cacheDebug2Mode);return null==debugMode&&(debugMode="0"),debugMode}),this.setCacheVar=doSessionStorage(function(p,v){var loc=0===findChar("$ddo.data",p)?p:"$ddo.data."+p;functionStart("setCacheVar",{p:loc,v:v},1,"e");var result=$setCacheVar(p,v);return functionEnd("setCacheVar",result,1,"e"),result});var _setCacheVar=doSessionStorage(function(p,v){var loc=0===findChar("$ddo.data",p)?p:"$ddo.data."+p;functionStart("_setCacheVar",{p:loc,v:v},2,"i");var result=$setCacheVar(p,v);return functionEnd("_setCacheVar",result,2,"i"),result}),$stringify=function(value){return void 0!==Object.toJSON?Object.toJSON(value):JSON.stringify(value)};$setCacheVar=doSessionStorage(function(p,v){var vJSON,loc="$ddo.data."+p;return vJSON=$stringify({value:v}),window.sessionStorage.setItem(loc,vJSON),window.sessionStorage.getItem(loc)}),this.getCacheVar=doSessionStorage(function(p){var value,tmp,loc=0===findChar("$ddo.data",p)?p:"$ddo.data."+p;return val=window.sessionStorage.getItem(loc),null!==val?(value=val,"string"==typeof(tmp=JSON.parse(value).value)?recursiveParse(tmp):tmp):null}),this.removeCacheVar=doSessionStorage(function(p){var loc=0===findChar("$ddo.data",p)?p:"$ddo.data."+p;return $me.squawk("removeCacheVar: removing variable "+loc+" from sessionStorage",1,"e"),$removeCacheVar(p)});var _removeCacheVar=doSessionStorage(function(p){var loc=0===findChar("$ddo.data",p)?p:"$ddo.data."+p;return $me.squawk("_removeCacheVar: removing variable "+loc+" from sessionStorage",2,"i"),$removeCacheVar(p)}),$removeCacheVar=doSessionStorage(function(p){var loc=0===findChar("$ddo.data",p)?p:"$ddo.data."+p;return window.sessionStorage.removeItem(loc),null===window.sessionStorage.getItem(loc)});this.removeAllCacheVar=doSessionStorage(function(){for(var k in $me.squawk("removeAllCacheVar: removing all cached data variables (stored settings will remain)",1,"e"),sessionStorage)0===findChar("$ddo.data",k)&&_removeCacheVar(k);return!0});var warn=function(m){noConsole||(m.stack?console.warn("DEDM: "+timeStampMS()+" -> "+m.stack):console.warn("DEDM: "+timeStampMS()+" -> "+m))},addZero=makeSafe(function(i){return i<10&&(i="0"+i),i}),addZero100=makeSafe(function(i){return i<10?i="00"+i:i<100&&(i="0"+i),i}),timeStampMS=makeSafe(function(){var d=new Date;return[addZero(d.getHours()),addZero(d.getMinutes()),addZero(d.getSeconds())].join(":")+"."+addZero100(d.getMilliseconds())}),getPassThroughDefinitions=makeSafe(function(){for(var definitions=[],max=$config.passThroughDefinitions.length,i=0;i<max;i++){var definition=$config.passThroughDefinitions[i];definitions.push(definition)}var config=getFlatConfig();for(max=config.length,i=0;i<max;i++){var property=config[i]["config attribute"];if(0!=property.indexOf("version.")&&0!=property.indexOf("passThroughDefinitions.")&&0!=property.indexOf("settings.")){var cfg=$me.getConfig(property);void 0!==cfg&&void 0!==cfg.passThrough&&cfg.passThrough&&definitions.push(property)}}return definitions});this.squawk=makeSafe(function(msg,lvl,opt){if("0"!==$me.checkDebug2())$me.squawk2(msg,opt),$me.setConsoleLog("DEDM: "+timeStampMS()+" -> "+msg,"DM");else{if(noConsole)return;void 0===lvl&&(lvl=99),this.checkDebug()>=lvl&&console.log("DEDM: L"+lvl+" "+timeStampMS()+" -> "+msg),$me.setConsoleLog("DEDM: "+timeStampMS()+" -> "+msg,"DM")}}),this.squawk2=makeSafe(function(msg,opt){var debugMode=$me.checkDebug2();"e"===opt&&"0"!==debugMode?console.log("DEDM: "+timeStampMS()+" -> "+msg):"2"===debugMode||"4"===debugMode?("4"===debugMode?console.log("%cDEDM: "+timeStampMS()+" -> "+msg+" (internal call)","color: gray"):console.log("DEDM: "+timeStampMS()+" -> "+msg+" (internal call)"),$me.setConsoleLog("DEDM: "+timeStampMS()+" -> "+msg,"DM")):"3"===debugMode&&(msg.indexOf("have a value of")>=0||msg.indexOf("is not set")>=0)&&(console.groupEnd(),console.log("%cDEDM: "+timeStampMS()+" -> "+msg,"background: #222; color: orange"))}),this.disableAutoPageLoad=makeSafe(function(){return functionStart("disableAutoPageLoad",void 0,1,"e"),$config.settings.disableAutoPageLoad=!0,functionEnd("disableAutoPageLoad",!0,1,"e"),!0}),this.checkPassThroughDefinitions=makeSafe(function(){return getPassThroughDefinitions()}),this.checkSettings=makeSafe(function(){return $config.settings}),this.checkInstallation=makeSafe(function(){for(var installation={header:{found:!1,parent:null,position:null,desired:"top"},footer:{found:!1,parent:null,position:null,desired:"bottom"},satellite:{found:!1,environment:null},"version:":ddo.version()},headerOrdinal=0,footerOrdinal=0,scripts=document.getElementsByTagName("script"),max=scripts.length,i=0;i<max;i++){var script=scripts[i],parentTagName=script.parentElement.tagName.toLowerCase();switch(parentTagName){case"head":++headerOrdinal;break;case"body":++footerOrdinal}if(void 0!==script.src&&script.src.length>0){var url=edmDataManager.getURLParts(script.src);"detm-container-hdr.js"==url.file.toLowerCase()?(installation.header.found=!0,installation.header.parent=parentTagName,installation.header.position=headerOrdinal):"detm-container-ftr.js"==url.file.toLowerCase()?(installation.footer.found=!0,installation.footer.parent=parentTagName,installation.footer.position=footerOrdinal):url.file.toLowerCase().indexOf("satellitelib")>-1&&(installation.satellite.found=!0,installation.satellite.environment="prod",url.file.toLowerCase().indexOf("-staging")>-1&&(installation.satellite.environment="stage"))}}return++headerOrdinal,++footerOrdinal,installation.header.position=installation.header.position+" of "+headerOrdinal,installation.footer.position=installation.footer.position+" of "+footerOrdinal,flattenObject(installation)}),this.getConfig=makeSafe(function(p){if(void 0===p)return $config;if("string"==typeof p){if(0===findChar("edm.",p)||0===findChar("chat.",p)||findChar(".attributes.",p)>-1||0===findChar("_",p))return!1;for(var cfg=$config,bits=p.split("."),i=0;i<bits.length;i++){if(void 0===cfg[bits[i]])throw'getConfig: configuration path "'+p+'" is not found.';cfg=cfg[bits[i]]}if(validateConfig(cfg))return cfg;throw"getConfig: variable configuration for "+p+" did not validate."}throw"getConfig requires either no parameter or a string indicating the data manager location."}),this.isValidConfig=makeSafe(function(p){for(var cfg=$config,bits=p.split("."),i=0;i<bits.length;i++){if(void 0===cfg[bits[i]])return!1;cfg=cfg[bits[i]]}return!!validateConfig(cfg)});var validateConfig=makeSafe(function(cfg){for(var cfgKey in cfg){var cfgKeyFound=!1;if(cfg.hasOwnProperty(cfgKey)){for(var allowedKey in _allowedInPrototype)cfgKey===_allowedInPrototype[allowedKey]&&(cfgKeyFound=!0);for(var i=0;i<_allowedInPrototype.length;i++)cfgKey===_allowedInPrototype[i]&&(cfgKeyFound=!0);if(!1===cfgKeyFound)return $me.squawk("validateConfig: variable configuration does not validate. Configuration contains a disallowed value."),!1}}for(var k=0;k<_requiredInPrototype.length;k++){var reqKeyFound=!1;for(var cfgKey in reqKey=_requiredInPrototype[k],cfg)cfg.hasOwnProperty(cfgKey)&&cfgKey===reqKey&&(reqKeyFound=!0);if(!1===reqKeyFound)return $me.squawk("validateConfig: variable configuration does not validate. A required key was not found."),!1}return!0});this.dump=makeSafe(function(opt){if(void 0!==opt&&"old"==opt){for(var $myddo=JSON.parse(JSON.stringify($ddo)),evt=0;evt<$myddo.events.length;evt++)$myddo.events[evt]._evtCached=0;var cachedEvents=$me.getCacheVar("events");for(var cevt in cachedEvents)cachedEvents[cevt]._evtCached=1;return null!==cachedEvents&&($myddo.events=$myddo.events.concat(cachedEvents)),$myddo}this.dumpList()});var getFlatDataLayer=makeSafe(function(opt){var $myddo=JSON.parse($stringify($ddo));for(var evt in $myddo.events)$myddo.events[evt]._evtCached=0;var cachedEvents=$me.getCacheVar("events");for(var cevt in cachedEvents)cachedEvents[cevt]._evtCached=1;null!==cachedEvents&&($myddo.events=$myddo.events.concat(cachedEvents));var flatDDO=flattenObject($myddo),arrDDO=[];for(var ob in flatDDO){var curVal="";curVal=-1===ob.indexOf("events.")?$me.getVar(ob):flatDDO[ob],"_all"!==opt&&"Default"===curVal||arrDDO.push({"data layer attribute":ob,value:curVal})}return arrDDO=arrDDO.sort(function(a,b){return a["data layer attribute"]>b["data layer attribute"]?1:a["data layer attribute"]<b["data layer attribute"]?-1:0})}),getFlatConfig=makeSafe(function(){var $myconfig=JSON.parse(JSON.stringify($config)),flatConfig=flattenObject($myconfig),arrConfig=[],removeFromConfigAttr=/\.dataType|\.loadAt|\.passThrough|\._default/,prevOb="";for(var ob in flatConfig)ob=ob.replace(removeFromConfigAttr,""),""!=prevOb&&-1!=prevOb.indexOf(ob)||0==ob.indexOf("_")||(arrConfig.push({"config attribute":ob}),prevOb=ob);return arrConfig=arrConfig.sort(function(a,b){return a["config attribute"]>b["config attribute"]?1:a["config attribute"]<b["config attribute"]?-1:0})});this.broadcastCustomEvent=makeSafe(function(eventName,eventData){$me.squawk2("edmDataManager:: starting custom event broadcast");var customDMEvent=new CustomEvent(eventName,{detail:{data:eventData},bubbles:!0,cancelable:!0});document.getElementsByTagName("head")[0].dispatchEvent(customDMEvent)}),this.dumpList=makeSafe(function(opt){var arrDDO=getFlatDataLayer(opt);if(advancedConsole)console.table(arrDDO);else if(!noConsole)for(var i=0;i<arrDDO.length;i++)console.log(arrDDO[i]["data layer attribute"]+": "+arrDDO[i].value)}),this.dl=this.dumpList,this.dumpFile=makeSafe(function(opt){var elem=document.getElementById("ddo-download-link");null!==elem&&elem.parentNode.removeChild(elem);for(var pom=document.createElement("a"),arrDDO=getFlatDataLayer(opt),text="",i=0;i<arrDDO.length;i++)text=text+'"'+arrDDO[i]["data layer attribute"]+'","'+arrDDO[i].value+'"\n';var d=new Date,filename="dataLayer_"+[d.getFullYear(),addZero(d.getMonth()),addZero(d.getDate())].join("-")+"_"+[addZero(d.getHours()),addZero(d.getMinutes()),addZero(d.getSeconds())].join("-")+".csv";pom.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(text)),pom.setAttribute("download",filename),pom.setAttribute("id","ddo-download-link"),document.body.insertBefore(pom,null),pom.click()});var flattenObject=function(ob){var toReturn={};for(var i in ob)if(ob.hasOwnProperty(i))if("object"==typeof ob[i]){var flatObject=flattenObject(ob[i]);for(var x in flatObject)flatObject.hasOwnProperty(x)&&(toReturn[i+"."+x]=flatObject[x])}else toReturn[i]=ob[i];return toReturn},arrayLast=makeSafe(function(arr){return arr[arr.length-1]}),writeData=makeSafe(function(p,v){for(var nodes=p.split("."),cursor=$ddo,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];return cursor[arrayLast(nodes)]=v,cursor[arrayLast(nodes)]}),deleteData=makeSafe(function(p){$me.squawk("deleteData: deleting "+p,"2","i");for(var nodes=p.split("."),cursor=$ddo,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];return delete cursor[arrayLast(nodes)],!0});this.setVar=makeSafe(function(p,v){functionStart("setVar( "+p+", "+v+" )",{p:p,v:v},1,"e");var result=$setVar(p,v);return functionEnd("setVar "+p,result,1,"e"),result});var _setVar=makeSafe(function(p,v){functionStart("_setVar "+p,{p:p,v:v},2,"i");var result=$setVar(p,v);return functionEnd("_setVar "+p,result,2,"i"),result}),$setVar=makeSafe(function(p,v){if(0===findChar("chat.",p)||0===findChar("edm.",p)||findChar(".attributes.",p)>-1)$me.squawk("$setVar: setting ungoverned variable: "+p+"."),writeData(p,v);else{if(!$me.getConfig(p))throw"$setVar: cannot set "+p+': variable does not have valid configuration and is neither an "edm", "chat" or ".attributes." (ungoverned) variable.';$me.squawk("$setVar: setting governed variable: "+p+".");var cfg=$me.getConfig(p);if(!cfg)throw"$setVar: cannot set "+p+". invalid configuration.";if(typeof v!==cfg.dataType)throw"$setVar: data type for "+p+" does not match configuration.";"function"==typeof cfg.rules?writeData(p,cfg.rules(v)):writeData(p,v)}return $me.getVar(p)});this.setVars=makeSafe(function(obj){if(functionStart("setVars",obj,1,"e"),"object"==typeof obj){for(var p in obj){var v=obj[p];_setVar(p,v)}return functionEnd("setVars",obj,1,"e"),obj}throw"setVars requires an object literal. Usage: setVars( {object literal} )"}),this.getVar=makeSafe(function(p){for(var cursor=$ddo,bits=p&&"$ddo"!==p?p.split("."):"",i=0;i<bits.length;i++){if(void 0===cursor[bits[i]]){cursor=void 0;break}cursor=cursor[bits[i]]}return void 0!==cursor&&"Default"!==cursor&&"UNKNOWN"!==cursor||"dynamicDefault"===$me.getConfig(p).loadAt&&(cursor=$me.getConfig(p).dynamicDefault.call()),cursor}),this.getImpressions=makeSafe(function(){return _oImpressions});var setPageLocation=makeSafe(function(){$ddo._pageLocation=new Object;var loc=$ddo._pageLocation;loc.windowURL=window.location.href;var urlParts=edmDataManager.getURLParts(loc.windowURL);loc.source=urlParts.source,loc.protocol=urlParts.protocol,loc.authority=urlParts.authority,loc.userInfo=urlParts.userInfo,loc.user=urlParts.user,loc.password=urlParts.password,loc.host=urlParts.host,loc.port=urlParts.port,loc.relative=urlParts.relative,loc.path=urlParts.path,loc.directory=urlParts.directory,loc.file=urlParts.file,loc.query=urlParts.query,loc.anchor=urlParts.anchor;var domainBits=loc.host.split(".");return domainBits.length<3?(loc.host="www."+loc.host,loc.subdomain="www"):loc.subdomain=domainBits.slice(0,domainBits.length-2).join("."),void 0===loc.query&&loc.windowURL.indexOf("?")>-1&&(loc.query=loc.windowURL.substr(loc.windowURL.indexOf("?")+1)),loc});this.getDCSextTags=makeSafe(function(){$me.squawk("getWTMetaTags: Reading Webtrends meta tags from page",1,"e");for(var dcsTags={},metas=document.getElementsByTagName("meta"),i=0;i<metas.length;i++)try{0===findChar("dcsext.",metas[i].getAttribute("name").toLowerCase())&&(dcsTags[metas[i].getAttribute("name").replace(/^dcsext\./i,"")]=metas[i].getAttribute("content"))}catch(e){}return $me.squawk("getWTMetaTags: Finished reading Webtrends meta tags from page",1,"e"),dcsTags}),this.setEDMFromDCSext=makeSafe(function(){functionStart("setEDMFromDCSext: Setting edm variables from Webtrends tags.",void 0,1,"e");var dcsTags=this.getDCSextTags();for(tag in dcsTags)void 0===this.getVar("edm."+tag)&&_setVar("edm."+tag,dcsTags[tag]);return functionEnd("setEDMFromDCSext: Finished setting edm variables from Webtrends tags.",void 0,1,"e"),!0}),this.concatEDM=makeSafe(function(){var eDMString=new Array;for(var i in $ddo.edm)eDMString.push(i+"="+("object"==typeof $ddo.edm[i]?JSON.stringify($ddo.edm[i]):$ddo.edm[i]));return eDMString.join("&")});var setDefaultHandlers=makeSafe(function(o,n){for(var k in o||(o=$config),o)"object"==typeof o[k]&&null!==o[k]?setDefaultHandlers(o[k],n?n+"."+k:k):"_default"===k&&(loadOn=o.loadAt?o.loadAt:"pageLoad",_eventHandlers[loadOn]||(_eventHandlers[loadOn]=[]),_eventHandlers[loadOn].push({p:n,f:o._default}))});this.getDefaultHandlers=makeSafe(function(){return _eventHandlers});var doDefaultHandlers=makeSafe(function(ev){if(functionStart("doDefaultHandlers: "+ev,void 0,2,"i"),_eventHandlers[ev])for(var i=0;i<_eventHandlers[ev].length;i++)$me.squawk("doDefaultHandlers calling getVar for "+_eventHandlers[ev][i].p+": "+$me.getVar(_eventHandlers[ev][i].p,3)),void 0!==$me.getVar(_eventHandlers[ev][i].p)&&"dynamicDefault"!==$me.getConfig(_eventHandlers[ev][i].p).loadAt||_setVar(_eventHandlers[ev][i].p,"function"==typeof _eventHandlers[ev][i].f?_eventHandlers[ev][i].f():_eventHandlers[ev][i].f);return functionEnd("doDefaultHandlers: "+ev,!0,2,"i"),!0});this.loadDefaultsDynamic=makeSafe(function(){functionStart("loadDefaultsDynamic",void 0,1,"e"),doDefaultHandlers("dynamicDefault"),functionEnd("loadDefaultsDynamic",void 0,1,"e")});var _loadDefaultsDynamic=makeSafe(function(){functionStart("_loadDefaultsDynamic",void 0,2,"i"),doDefaultHandlers("dynamicDefault"),functionEnd("loadDefaultsDynamic",void 0,2,"i")});this.loadDefaultsInit=makeSafe(function(){functionStart("loadDefaultsInit",void 0,1,"e"),doDefaultHandlers("init"),functionEnd("loadDefaultsInit",void 0,1,"e")});var _loadDefaultsInit=makeSafe(function(){functionStart("_loadDefaultsInit",void 0,2,"i"),doDefaultHandlers("init"),functionEnd("_loadDefaultsInit",void 0,2,"i")});this.loadDefaultsPostInit=makeSafe(function(){functionStart("loadDefaultsPostInit",void 0,1,"e"),doDefaultHandlers("postInit"),functionEnd("loadDefaultsPostInit",void 0,1,"e")}),this._loadDefaultsPostInit=makeSafe(function(){functionStart("_loadDefaultsPostInit",void 0,2,"i"),doDefaultHandlers("postInit"),functionEnd("_loadDefaultsPostInit",void 0,2,"i")}),this.loadDefaultsPageLastLine=makeSafe(function(){functionStart("loadDefaultsPageLastLine",void 0,1,"e"),doDefaultHandlers("pageLastLine"),functionEnd("loadDefaultsPageLastLine",void 0,1,"e")});var _loadDefaultsPageLastLine=makeSafe(function(){functionStart("_loadDefaultsPageLastLine",void 0,2,"i"),doDefaultHandlers("pageLastLine"),functionEnd("_loadDefaultsPageLastLine",void 0,2,"i")});this.loadDefaultsDocReady=makeSafe(function(){functionStart("loadDefaultsDocReady",void 0,1,"e"),doDefaultHandlers("docReady"),functionEnd("loadDefaultsDocReady",void 0,1,"e")});var _loadDefaultsDocReady=makeSafe(function(){functionStart("_loadDefaultsDocReady",void 0,2,"i"),doDefaultHandlers("docReady"),functionEnd("_loadDefaultsDocReady",void 0,2,"i")});this.loadDefaultsPageLoad=makeSafe(function(){functionStart("loadDefaultsPageLoad",void 0,1,"e"),doDefaultHandlers("pageLoad"),functionEnd("loadDefaultsPageLoad",void 0,1,"e")});var _loadDefaultsPageLoad=makeSafe(function(){functionStart("_loadDefaultsPageLoad",void 0,2,"i"),doDefaultHandlers("pageLoad"),functionEnd("_loadDefaultsPageLoad",void 0,2,"i")});this.pageLastLine=makeSafe(function(){functionStart("pageLastLine",void 0,1,"e"),_loadDefaultsPageLastLine(),docReady(function(){_loadDefaultsDocReady()},void 0,!1),window.addEventListener?(window.addEventListener("load",function(){_loadDefaultsPageLoad()},!1),window.addEventListener("load",function(){autoPageLoadEvent()},!1)):window.attachEvent&&(window.attachEvent("onload",function(){_loadDefaultsPageLoad()}),window.attachEvent("onload",function(){autoPageLoadEvent()})),functionEnd("pageLastLine",void 0,1,"e")});var autoPageLoadEvent=makeSafe(function(){if(!0===$config.settings.disableAutoPageLoad)return $me.squawk("automatic pageLoad event suppressed with disableAutoPageLoad()",2,"i"),!1;functionStart("autoPageLoadEvent",void 0,2,"e");var result=_pushEvent("pageLoad","page loaded");return functionEnd("autoPageLoadEvent",result,2,"e"),result}),processEventActions=makeSafe(function(evt,evtInstructions){var instructions=evtInstructions,advancedInstruction="";for(var instructionAction in instructions)if(instructionAction===evt.eventAction){if(!0===isEventInstruction(instructions[instructionAction]))return instructions[instructionAction];if("object"==typeof instructions[instructionAction]){for(var instructionName in instructions[instructionAction])if(instructionName===evt.eventCode){if(!0===isEventInstruction(instructions[instructionAction][instructionName]))return instructions[instructionAction][instructionName];if("function"==typeof instructions[instructionAction][instructionName]&&(advancedInstruction=instructions[instructionAction][instructionName](evt),!0===isEventInstruction(advancedInstruction)))return advancedInstruction}else if("defaultInstruction"===instructionName)var instructionDefault=instructions[instructionAction][instructionName];else if("object"==typeof instructions[instructionAction][instructionName]&&(advancedInstruction=instructions[instructionAction][instructionName],!0===matchesEventAttributes(evt,advancedInstruction)))return advancedInstruction;return!0===isEventInstruction(instructionDefault)?instructionDefault:getEventInstructionDefault()}}return void 0!==instructions.defaultInstruction&&instructions.defaultInstruction}),matchesEventAttributes=makeSafe(function(evt,instructions){var matchFlag=!1;for(var attrib in instructions)if(instructions.hasOwnProperty(attrib)&&void 0!==instructions[attrib]&&void 0!==evt[attrib]&&"sendHitNow"!=attrib&&"clearDataLayer"!=attrib&&"isPageView"!=attrib){if(!wildcardMatch(instructions[attrib],evt[attrib])){matchFlag=!1;break}matchFlag=!0}return matchFlag}),isEventInstruction=makeSafe(function(o){return"object"==typeof o&&("boolean"==typeof o.sendHitNow||"boolean"==typeof o.clearDataLayer||"boolean"==typeof o.isPageView)}),getEventInstructionDefault=makeSafe(function(){return{sendHitNow:!1,clearDataLayer:!1}}),getType=makeSafe(function(o){return{}.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}),pushCacheEvent=doSessionStorage(function(evt){functionStart("pushCacheEvent",evt,2,"i");var arrEvents=$me.getCacheVar("events");return null===arrEvents&&(arrEvents=[]),arrEvents.push(evt),_setCacheVar("events",arrEvents),functionEnd("pushCacheEvent",$me.getCacheVar("events"),2,"i"),evt});this.flushEventCache=doSessionStorage(function(type){return $me.squawk("flushEventCache: flushing event cache.",1,"e"),void 0===type&&(type=null),$flushEventCache()});var _flushEventCache=doSessionStorage(function(type){return $me.squawk("_flushEventCache: flushing event cache.",2,"i"),$flushEventCache(type)}),$flushEventCache=doSessionStorage(function(type){void 0===type&&(type=null);var evtCache=$me.getCacheVar("events");if(null!==evtCache)for(var evt=0;evt<evtCache.length;evt++)null!==evtCache[evt]&&(evtCache[evt]._evtOrder=++_eventOrder,$ddo.events.push(evtCache[evt]),"pageLoad"==type&&("impression"==evtCache[evt].eventAction?(void 0===_oImpressions[evtCache[evt]._evtPageName]&&(_oImpressions[evtCache[evt]._evtPageName]=[]),_oImpressions[evtCache[evt]._evtPageName].push(evtCache[evt])):_eventsToBeProcessed.push(evtCache[evt])));return _removeCacheVar("events"),$me.getVar("events")}),_flushImpressions=doSessionStorage(function(){functionStart("_flushImpressions",1,"i"),$me.squawk("_flushImpressions: flushing impressions from cache to the impression array.",2,"i"),$flushImpressions(),functionEnd("_flushImpressions",1,"i")}),$flushImpressions=doSessionStorage(function(){_oImpressions={};var evtCache=null,currPageName="";if(null!=$me.getCacheVar("events")&&(evtCache=sortByTimestampASC($me.getCacheVar("events")),_removeCacheVar("events")),null!==evtCache)for(var evt=0;evt<evtCache.length;evt++)null!==evtCache[evt]&&"impression"==evtCache[evt].eventAction?(evtCache[evt]._evtOrder=++_eventOrder,void 0===_oImpressions[evtCache[evt]._evtPageName]&&(_oImpressions[evtCache[evt]._evtPageName]=[]),evtCache[evt]._evtPageName!=currPageName?(_oImpressions[evtCache[evt]._evtPageName].push(evtCache[evt]),currPageName=evtCache[evt]._evtPageName):_oImpressions[evtCache[evt]._evtPageName].push(evtCache[evt]),$ddo.events.push(evtCache[evt])):pushCacheEvent(evtCache[evt])});this.processedByDTM=makeSafe(function(evtOrder,evtType){for(var evtArray=[$ddo.events,_oImpressions,_eventsToBeProcessed],j=0;j<evtArray.length;j++){if(aAllEvents=evtArray[j],"WT"==evtType)for(var i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._processedByWT=1,ddo.squawk2("DEDM: DTM has updated _processedByWT for event action: "+aAllEvents[i].eventAction+" with an _evtOrder of: "+aAllEvents[i]._evtOrder));if("Adobe"==evtType)for(i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._processedByAdobe=1,ddo.squawk2("DEDM: DTM has updated _processedByAdobe for event action: "+aAllEvents[i].eventAction+" with an _evtOrder of: "+aAllEvents[i]._evtOrder))}}),this.getUnprocessedEvents=makeSafe(function(evtType){var aAllEvents=sortByEventOrderASC($ddo.events),aTmp=[];if("WT"==evtType)for(var i=0;i<aAllEvents.length;i++)void 0!==aAllEvents[i]._processedByWT&&0==aAllEvents[i]._processedByWT&&aTmp.push(aAllEvents[i]);if("Adobe"==evtType)for(i=0;i<aAllEvents.length;i++)void 0!==aAllEvents[i]._processedByAdobe&&0==aAllEvents[i]._processedByAdobe&&aTmp.push(aAllEvents[i]);return aTmp}),this.getEvents=makeSafe(function(evtAction,evtCode){if(null==evtAction&&null==evtCode)return getLatestEvents();if("_all"===evtAction)return sortByEventOrderASC($ddo.events);if("processedByWT"===evtAction)return this.getUnprocessedEvents("WT");if("processedByAdobe"===evtAction)return this.getUnprocessedEvents("Adobe");var results=[],events=getLatestEvents();for(var evt in events)evtAction&&events[evt].eventAction!==evtAction||evtCode&&events[evt].eventCode!==evtCode||results.push(events[evt]);return sortByEventOrderASC(results)}),this.getEventByNum=makeSafe(function(arr,evtNum){if(void 0!==evtNum){for(var aAllEvents=sortByEventOrderASC(arr),i=0;i<aAllEvents.length;i++)if(aAllEvents[i]._evtOrder==evtNum)return aAllEvents[i];ddo.squawk2("DEDM: No event with an _evtOrder of: "+evtNum+" was found.")}return!1}),this.getEventByNumTC=makeSafe(function(evtNum){if(void 0!==evtNum){for(var aAllEvents=sortByEventOrderASC($ddo.events),i=0;i<aAllEvents.length;i++)if(aAllEvents[i]._evtOrder==evtNum){var aAllEventsTC=aAllEvents[i],tcDDO=getFlatDataLayer(),max=tcDDO.length;for(i=0;i<max;i++){var arrayElem=tcDDO[i];if(attributeCheck=arrayElem["data layer attribute"],attributeCheck.indexOf("events")<0){attributeSplit=attributeCheck.split(".");var cursor=aAllEventsTC;for(i=0;i<attributeSplit.length-1;i++)cursor[attributeSplit[i]]||(cursor[attributeSplit[i]]={}),cursor=cursor[attributeSplit[i]];cursor[arrayLast(attributeSplit)]=arrayElem.value}}return aAllEventsTC}ddo.squawk2("DEDM: No event with an _evtOrder of: "+evtNum+" was found.")}return!1}),this.getLastPageView=makeSafe(function(){for(var events=this.getEvents("_all"),pageViews=[],i=0;i<events.length;i++)!0===events[i]._evtInstructions.isPageView&&pageViews.push(events[i]);return arrayLast(sortByEventOrderASC(pageViews))}),this.stringArrayEvents=makeSafe(function(){for(var cursor=0,arrStrEvents=[],str="",strJsonEvents=$stringify(this.getEvents()),i=0;i<10;i++){if(strJsonEvents.length<100){$me.squawk("stringArrayEvents: chunk: "+i+" (final) pos: "+cursor+" str: "+strJsonEvents,1,"e"),arrStrEvents.push(strJsonEvents);break}str=strJsonEvents.substr(cursor,100),$me.squawk("stringArrayEvents: chunk: "+i+" pos: "+cursor+" str: "+str,1,"e"),arrStrEvents.push(str),cursor+=100}return arrStrEvents});var sendEvents=makeSafe(function(){return"object"==typeof detmScriptExecutor&&"undefined"!==_eventsToBeProcessed&&_eventsToBeProcessed.length>0?($me.squawk("calling DTM",1,"e"),detmScriptExecutor.execute("DM_PushEventHandler",null),!0):($me.squawk("DTM not found",1,"e"),!1)});this.broadcastQueuedEvents=makeSafe(function(type){if((void 0===type||"TC"!=type)&&null!=_tcObj&&void 0!==_TouchCommerceQueue&&_TouchCommerceQueue.length>0){for(var i=0;i<_TouchCommerceQueue.length;i++){var evt=_TouchCommerceQueue[i],payload={eventAction:evt.eventAction,eventCode:evt.eventCode,eventOrder:evt._evtOrder,data:evt};_tcObj.fireCustomEvent("dataReadyInDL",payload)}_TouchCommerceQueue=[]}}),this.sendLog=makeSafe(function(evtCode,evtAction,where){functionStart("_sendLog",1,"e"),$me.squawk("_sendLog: sending log files",2,"i"),$sendLog(evtCode,evtAction,where),functionEnd("_sendLog",1,"e")});var _sendLog=makeSafe(function(evtCode,evtAction,where){functionStart("_sendLog",1,"e"),$me.squawk("_sendLog: sending log files",2,"i"),$sendLog(evtCode,evtAction,where),functionEnd("_sendLog",1,"e")}),$sendLog=makeSafe(function(evtCode,evtAction,where){if(void 0===where)var aLogMessage="['"+ddo.getVar("page.location.domain")+"','"+ddo.getVar("page.location.url")+"','"+evtAction+"','"+evtCode+"','"+ddo.getVar("page.pageInfo.friendlyPageName")+"','"+ddo.getVar("page.pageInfo.flowCode")+"']";else aLogMessage=[_consoleLog.dtmLogs];var xmlhttp,logItems={logType:"info",logMessage:aLogMessage,userID:ddo.getVar("user.account.appVisitorCookie")};(xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4===xmlhttp.readyState&&(200===xmlhttp.status?null!=logItems&&console.log("info","Log persisting to server completed successfully"):400===xmlhttp.status?console.log("Event Configuration file load error with status code = 400"):console.log("Event Configuration file load error with status code = "+xmlhttp.status))},xmlhttp.open("POST","http://135.163.160.196/DMS/service.svc/Log",!1),xmlhttp.setRequestHeader("Content-Type","application/json"),xmlhttp.send(JSON.stringify(logItems)),$clearConsoleLog()}),$redirect=makeSafe(function(url,target){void 0!==target?window.open(url,target):window.location=url}),$delayNavigationForBeacons=makeSafe(function(url,target,delay){delay*=1e3,adobeBeaconSent=new Promise(function(resolve){$me.squawk("Adobe promise initiated!",1,"i"),document.addEventListener("adobeBeaconSent",function(e){resolve()})}),wtBeaconSent=new Promise(function(resolve){$me.squawk("WT promise initiated!",1,"i"),document.addEventListener("wtBeaconSent",function(e){resolve()})}),window.setTimeout(function(){$redirect(url,target)},delay),Promise.all([wtBeaconSent,adobeBeaconSent]).then(function(){$redirect(url,target)}).catch(function(){$redirect(url,target)})});this.pushEvent=makeSafe(function(evtAction,evtName,evtDetails,forceSend){functionStart("pushEvent( "+evtAction+", "+evtName+" )",{evtAction:evtAction,evtName:evtName,evtDetails:evtDetails},1,"e");var evt=$pushEvent(evtAction,evtName,evtDetails,forceSend);return functionEnd("pushEvent( "+evtAction+", "+evtName+" )",evt,1,"e"),evt});var _pushEvent=makeSafe(function(evtAction,evtName,evtDetails,forceSend){functionStart("_pushEvent( "+evtAction+", "+evtName+" )",{evtAction:evtAction,evtName:evtName,evtDetails:evtDetails},1,"i");var evt=$pushEvent(evtAction,evtName,evtDetails,forceSend);return functionEnd("_pushEvent( "+evtAction+", "+evtName+" )",evt,1,"i"),evt}),$isValidEventAction=makeSafe(function(evtAction){var valid=!1,validEventActions=$config._globalEventActions;for(var instructionAction in validEventActions)if(instructionAction===evtAction){valid=!0;break}return valid}),$pushEvent=makeSafe(function(evtAction,evtName,evtDetails,forceSend){try{if($isValidEventAction(evtAction)){$ddo.page.location._addressBarFullURL=$config.page.location._addressBarFullURL._default();var evt={eventAction:evtAction,eventCode:evtName};for(var item in evtDetails)$me.isValidConfig(item)||0===findChar("edm.",item)||findChar(".attributes.",item)>-1?_setVar(item,evtDetails[item]):evt[item]=evtDetails[item];evt._evtAddressBarFullURL=$me.getVar("page.location._addressBarFullURL"),evt._evtDomain=$me.getVar("page.location.domain"),evt._evtTitle=$me.getVar("page.pageInfo.pageTitle"),evt._evtPageName=$me.getVar("page.pageInfo.pageName")?$me.getVar("page.pageInfo.pageName"):"pageName not available",evt._evtChatState=$me.getVar("page.pageInfo.chatState"),evt._evtFriendlyPageName=$me.getVar("page.pageInfo.friendlyPageName")?$me.getVar("page.pageInfo.friendlyPageName"):"Default",evt._evtFsrCookie=$me.getVar("page.pageInfo.fsrMicroCookie")||$me.getVar("page.pageInfo.fsrCookie"),evt._evtQuerystring=$me.getVar("page.location.queryString"),evt._evtFlowCode=$me.getVar("page.pageInfo.flowCode"),evt._evtLanguage=$me.getVar("page.pageInfo.language"),evt._evtLineOfBusiness=$me.getVar("page.pageInfo.lineOfBusiness"),evt._evtViewedUIExperience=$me.getVar("page.pageInfo.viewedUIExperience"),evt._evtResponsiveWebDesignFlag=$me.getVar("page.pageInfo.responsiveWebDesignFlag"),evt._evtZipCode=$me.getVar("page.pageInfo.zipCode"),evt._evtPageGroup=$me.getVar("page.category.pageGroup"),evt._evtPageFunction=$me.getVar("page.category.pageFunction"),evt._evtPageOwnership=$me.getVar("page.category.pageOwnership"),evt._evtApplicationName=$me.getVar("page.category.applicationName"),evt._evtAcctInFocusProductTenureGroup=$me.getVar("user.account.acctInFocusProductTenureGroup"),evt._evtLockerPlan=$me.getVar("user.account.lockerPlan"),evt._evtToggleFlag=$me.getVar("user.account.toggleFlag"),evt._evtWirelineSubscriberDomain=$me.getVar("user.account.wirelineSubscriberDomain"),evt._evtSdgFlag=$me.getVar("user.account.sdgFlag"),evt._evtSdgId=$me.getVar("user.account.sdgId"),evt._evtAcctInFocusTenureGroup=$me.getVar("user.account.acctInFocusTenureGroup"),evt._evtAccountInFocusType=$me.getVar("user.account.accountInFocusType"),evt._evtAccountInFocusIdentifier=$me.getVar("user.account.accountInFocusIdentifier"),evt._evtAccountInFocusSlidRole=$me.getVar("user.account.accountInFocusSlidRole"),evt._evtAccountInFocusStatus=$me.getVar("user.account.accountInFocusStatus"),evt._evtCombinedBill=$me.getVar("user.account.combinedBill"),evt._evtConnectedVehicle=$me.getVar("user.account.connectedVehicle"),evt._evtMemberId=$me.getVar("user.account.memberId"),evt._evtMemberStatus=$me.getVar("user.account.memberStatus"),evt._evtMemberType=$me.getVar("user.account.memberType"),evt._evtWirelineAccountType=$me.getVar("user.account.wirelineAccountType"),evt._evtWirelineBtn=$me.getVar("user.account.wirelineBtn"),evt._evtWirelineRegion=$me.getVar("user.account.wirelineRegion"),evt._evtWirelineUserId=$me.getVar("user.account.wirelineUserId"),evt._evtWirelineUserStatus=$me.getVar("user.account.wirelineUserStatus"),evt._evtWirelineUserType=$me.getVar("user.account.wirelineUserType"),evt._evtServiceType=$me.getVar("user.account.serviceType"),evt._evtBillingSystem=$me.getVar("user.account.billingSystem"),evt._evtLiabilityType=$me.getVar("user.account.liabilityType"),evt._evtAppVisitorCookie=$me.getVar("user.appVisitorCookie"),evt._evtTechLanguage=$me.getVar("user.tech.language"),evt._evtTechUserAgent=$me.getVar("user.tech.userAgent"),evt._evtPageURL=$me.getVar("page.location.url"),evt._processedByWT=0,evt._processedByAdobe=0,evt._processedDueToTime=0;var evtInstructions=getEventInstructions(evt,evtDetails);for(var key in evt._evtInstructions={},evtInstructions)evtInstructions.hasOwnProperty(key)&&(evt._evtInstructions[key]=evtInstructions[key]);var siteSettings=getSiteSettings();if(void 0!==evtDetails&&"boolean"==typeof evtDetails.clearDataLayer?!0===evtDetails.clearDataLayer?(delete evtDetails.clearDataLayer,evt._clearDataLayer=2,_clearVar("_all")):evt._clearDataLayer=0:"boolean"==typeof evtInstructions.clearDataLayer?!0===evtInstructions.clearDataLayer?(evt._clearDataLayer=1,$me.clearVar("_all")):evt._clearDataLayer=0:!0===getEventInstructionDefault().clearDataLayer?(evt._clearDataLayer=1,_clearVar("_all")):evt._clearDataLayer=0,void 0!==evtDetails&&void 0!==evtDetails.linkTargetURL&&void 0!==evtInstructions&&void 0!==evtInstructions.linkDestinationURL)wildcardMatch(evtInstructions.linkDestinationURL,evtDetails.linkTargetURL)?evt._sendHitNow=4:evt._sendHitNow=-4;else if(void 0!==evtDetails&&void 0!==evtDetails.sendHitNow){if("boolean"!=typeof evtDetails.sendHitNow)throw"pushEvent error: sendHitNow must be a boolean. The value passed <"+evtDetails.sendHitNow+"> is type "+typeof evtDetails.sendHitNow;!0===evtDetails.sendHitNow?(delete evtDetails.sendHitNow,evt._sendHitNow=2):evt._sendHitNow=-2}else if("boolean"==typeof evtInstructions.sendHitNow){if(!0===evtInstructions.sendHitNow?evt._sendHitNow=1:evt._sendHitNow=-1,void 0!==evtDetails&&(void 0!==evtDetails.linkDestinationURL||void 0!==evtDetails.linkDestinationUrl)){var currentDomain=location.protocol+"//"+location.hostname,ldu=evtDetails.linkDestinationURL||evtDetails.linkDestinationUrl,aLDU=edmDataManager.getURLParts(ldu);if(void 0!==aLDU.protocol||void 0!==aLDU.host&&""!=aLDU.host){var newDomain=aLDU.protocol+"://"+aLDU.host;-1==currentDomain.indexOf(newDomain)&&(evt._sendHitNow=1)}else evt._sendHitNow=-1}}else!0===getEventInstructionDefault().sendHitNow?evt._sendHitNow=1:evt._sendHitNow=0;if(evt._evtTimestampJS=makeTimestamp(),!0===evt._evtInstructions.isPageView?evt._evtPageTimestampJS=evt._evtTimestampJS:void 0!==$me.getLastPageView()?evt._evtPageTimestampJS=$me.getLastPageView()._evtTimestampJS:evt._evtPageTimestampJS=null,evt._evtDMInitTimestampJS=$initTimestamp,evt._evtIsBound=0,findChar("Response",evt.eventAction)>-1&&("string"!=evt._doNotBind&&1==evt._doNotBind||(evt=bindEvent(evt))),evt._sendHitNow>0){if($me.squawk("pushEvent: sending event now.",2),!0===evt._evtInstructions.isPageView?_flushEventCache("pageLoad"):_flushImpressions(),evt._evt_DTM_InEventHandler=0,evt._wtConditionProcessed=0,evt._evtOrder=++_eventOrder,$ddo.events.push(evt),_eventsToBeProcessed.push(evt),"flushEvents"==evtAction&&($me.processedByDTM(evt._evtOrder,"WT"),$me.processedByDTM(evt._evtOrder,"Adobe")),sendEvents(evtAction,evtName),void 0!==evtDetails&&void 0!==evtDetails.linkDestinationURL&&(void 0!==evtInstructions&&void 0!==evtInstructions.delayNavigation||void 0!==siteSettings&&void 0!==siteSettings.delayNavigation)){var evtDelay=void 0!==evtInstructions&&void 0!==evtInstructions.delayNavigation?evtInstructions.delayNavigation:0,siteDelay=void 0!==siteSettings&&void 0!==siteSettings.delayNavigation?siteSettings.delayNavigation:0,tmpDelay=0;evtDelay>0?tmpDelay=evtDelay:siteDelay>0&&(tmpDelay=siteDelay);var maxDelay=void 0===$config.settings.maxNavigationDelay?0:$config.settings.maxNavigationDelay,theDelay=tmpDelay<maxDelay?tmpDelay:maxDelay;isIE(8)?window.location.href=evtDetails.linkDestinationURL:$delayNavigationForBeacons(evtDetails.linkDestinationURL,evtDetails.target,theDelay)}}else $me.squawk("pushEvent: adding event to cache.",2),pushCacheEvent(evt);if(void 0!==siteSettings&&void 0!==siteSettings.logConsole&&1==siteSettings.logConsole&&_sendLog(evt.eventCode,evt.eventAction),"flushEvents"!==evtAction&&(void 0!==_tcObj&&null!=_tcObj&&"function"==typeof _tcObj.fireCustomEvent?_tcObj.fireCustomEvent("dataReadyInDL",{eventAction:evt.eventAction,eventCode:evt.eventCode,eventOrder:evt._evtOrder,data:evt}):void 0!==_TouchCommerceQueue&&_TouchCommerceQueue.length<=100&&_TouchCommerceQueue.push(evt)),"pageLoad"==evt.eventAction){var broadcastParam=new edmEventApi(evt);if(0==broadcastParam.isModal()){var customEventName=broadcastParam.getCustomEventName();$me.broadcastCustomEvent(customEventName,broadcastParam),$me.squawk("####edmDataManager:pushEvent broadcastCustomEvent: "+customEventName)}}return $me.broadcastCustomEvent("DM_Event",evt),evt}$me.squawk2("Error: pushEvent() failed: invalid eventAction ","e")}catch(e){try{evt={eventAction:evtAction,eventCode:evtName,_errorMsg:void 0!==e.name&&void 0!==e.message?e.name+": "+e.message:e,_sendHitNow:5,_evtIsBound:0,_evtTimestampJS:makeTimestamp(),_evtDMInitTimestampJS:$initTimestamp,_evtAddressBarFullURL:window.location.href,_evtDomain:window.location.host,_evtPageURL:window.location.href};return $ddo.events.push(evt),sendEvents(evtAction,evtName),evt}catch(e){sendEvents(evtAction,evtName)}}}),bindEvent=makeSafe(function(evt){var matchKeyword=evt.eventAction.slice(0,findChar("Response",evt.eventAction));$me.squawk("bindEvent: attempting to bind event "+evt.eventAction+", "+evt.eventCode+". Keyword: "+matchKeyword,2,"i");var events=null!==$me.getCacheVar("events")?sortByTimestampDESC($me.getCacheVar("events")):[];if(0===events.length)return $me.squawk("bindEvent: no events in cache to merge",2,"i"),evt;for(n in events)if("object"==typeof events[n]&&findChar(matchKeyword,events[n].eventAction)>-1&&(findChar("Response",events[n].eventAction)>-1||findChar("Submit",events[n].eventAction)>-1)){if($me.squawk("bindEvent: submit eventAction found. looking at eventCode",2,"i"),evt.eventCode===events[n].eventCode||"_auto"===evt.eventCode){for(var item in events[n])0!==findChar("event",item)&&void 0===evt[item]&&(evt[item]=events[n][item]);evt._bevtAddressBarFullURL=events[n]._evtAddressBarFullURL,evt._bevtChatState=events[n]._evtChatState,evt._bevtDMInitTimestampJS=events[n]._evtDMInitTimestampJS,evt._bevtDomain=events[n]._evtDomain,evt._bevtFriendlyPageName=events[n]._evtFriendlyPageName,evt._bevtPageGroup=events[n]._evtPageGroup,evt._bevtPageName=events[n]._evtPageName,evt._bevtPageTimestampJS=events[n]._evtPageTimestampJS,evt._bevtPageURL=events[n]._evtPageURL,evt._bevtTimestampJS=events[n]._evtTimestampJS,evt._bevtViewedUIExperience=events[n]._evtViewedUIExperience,evt._evtIsBound=evt.eventCode===events[n].eventCode?1:2,evt.eventCode="_auto"===evt.eventCode?events[n].eventCode:evt.eventCode,events.splice(n,1);break}$me.squawk("bindEvent: eventCode does not match. moving on.",2,"i")}return $me.squawk("bindEvent: pushing events array back to cache",2,"i"),events.length>0?($me.squawk("bindEvent: pushing "+events.length+" events.",2,"i"),_setCacheVar("events",events)):($me.squawk("bindEvent: no events to push back. removing the session cache.",2,"i"),_removeCacheVar("events")),evt});this.getEventToBind=makeSafe(function(evtAction){functionStart("getEventToBind: "+evtAction,evtAction,1,"e");var matchKeyword=evtAction.slice(0,findChar("Response",evtAction)),events=null!==$me.getCacheVar("events")?sortByTimestampDESC($me.getCacheVar("events")):[];if(0===events.length)return $me.squawk("getEventToBind: no events in cache.",1,"e"),functionEnd("getEventToBind: "+evtAction,!1,1,"e"),!1;for(n in events)if(findChar(matchKeyword,events[n].eventAction)>-1&&findChar("Submit",events[n].eventAction)>-1)return functionEnd("getEventToBind: "+evtAction,events[n],1,"e"),events[n];return $me.squawk("getEventToBind: event to bind not found. returning false.",1,"e"),functionEnd("getEventToBind: "+evtAction,!1,1,"e"),!1});var getLatestEvents=makeSafe(function(snapshotID){for(var arrAllEvents=sortByEventOrderASC($ddo.events),i=arrAllEvents.length-1;i>=0;i--)if(arrAllEvents[i]._sendHitNow>0&&i!==arrAllEvents.length-1)return arrAllEvents.slice(i+1);return arrAllEvents}),makeTimestamp=makeSafe(function(){return"number"==typeof Date.now()?Date.now():+new Date}),functionStart=makeSafe(function(func,args,messageLevel,opt){var debugMode=$me.checkDebug();"0"!==$me.checkDebug2()?functionStart2(func,args,opt):"0"!==debugMode&&(noConsole||(void 0===messageLevel&&(messageLevel=2),debugMode>=messageLevel&&($me.squawk(func+": function start.",messageLevel),void 0!==args&&""!==args&&console.log(args))))}),functionStart2=makeSafe(function(func,args,opt){var debugMode=$me.checkDebug2();if("0"!==debugMode&&"e"===opt){if("4"===debugMode||"3"===debugMode){var msg=timeStampMS()+" -> "+func+": function start.";-1!==window.navigator.userAgent.indexOf("Chrome/")?wildcardMatch("setVar*",func)?console.groupCollapsed("%cDEDM: "+msg,"color: blue"):wildcardMatch("pushEvent*",func)?console.groupCollapsed("%cDEDM: "+msg,"color: green"):wildcardMatch("autoPageLoadEvent*",func)?console.groupCollapsed("%cDEDM: "+msg,"color: purple"):console.groupCollapsed("%cDEDM: "+msg,"color: black"):(console.group(),wildcardMatch("setVar*",func)?console.log("%cDEDM: "+msg,"color: blue; font-weight: bold"):wildcardMatch("pushEvent*",func)?console.log("%cDEDM: "+msg,"color: green; font-weight: bold;"):wildcardMatch("autoPageLoadEvent*",func)?console.log("%cDEDM: "+msg,"color: purple; font-weight: bold;"):console.log("%cDEDM: "+msg,"color: black"))}else $me.squawk2(msg,"e");if(void 0!==args&&""!==args)if(wildcardMatch("setVar*",func)){if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: blue"),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: blue")}else console.log("%c"+args,"color: blue");console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: blue")}else if(wildcardMatch("pushEvent*",func)){if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: green"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: green")}else console.log("%c"+args,"color: green");console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: green")}else if(wildcardMatch("autoPageLoadEvent*",func)){if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: purple"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: purple")}else console.log("%c"+args,"color: green");console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: purple")}else{if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: black"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: black")}else console.log("%c"+args,"color: black");console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: black")}}else if("2"===debugMode||"4"===debugMode){if("4"===debugMode||"3"===debugMode){msg=timeStampMS()+" -> "+func+": function start. (internal call)";if(-1!==window.navigator.userAgent.indexOf("Chrome/")?console.groupCollapsed("%cDEDM: "+msg,"color: gray"):console.groupCollapsed("DEDM: "+msg),console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: gray"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: gray")}else console.log("%c"+args,"color: gray");console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: gray")}else $me.squawk2(func+": function start.");void 0!==args&&""!==args&&console.log(args)}}),functionEnd=makeSafe(function(func,args,messageLevel,opt){var debugMode=$me.checkDebug();"0"!==$me.checkDebug2()?functionEnd2(func,args,opt):"0"!==debugMode&&(noConsole||(void 0===messageLevel&&(messageLevel=2),debugMode>=messageLevel&&(void 0!==args&&""!==args&&null!==args?console.log(args):void 0===args?console.log("[function returned undefined]"):""===args?console.log("[function returned blank string]"):null===args&&console.log("[function returned null]"),$me.squawk(func+": function end.",messageLevel))))}),functionEnd2=makeSafe(function(func,args,opt){var debugMode=$me.checkDebug2();if("0"!==debugMode&&"e"===opt){var msg="DEDM: "+timeStampMS()+" -> "+func+": function end.";if(void 0!==args&&""!==args)if(wildcardMatch("setVar*",func)){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: blue"),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: blue")}else console.log("%c"+args,"color: blue");console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: blue"),console.log("%c"+msg,"color: blue")}else if(wildcardMatch("pushEvent*",func)){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: green"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: green")}else console.log("%c"+args,"color: green");console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: green"),console.log("%c"+msg,"color: green")}else if(wildcardMatch("autoPageLoadEvent*",func)){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: purple"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: purple")}else console.log("%c"+args,"color: green");console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: purple"),console.log("%c"+msg,"color: purple")}else{if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: black"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: black")}else console.log("%c"+args,"color: black");console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: black"),console.log("%c"+msg,"color: black")}"4"!==debugMode&&"3"!==debugMode||console.groupEnd()}else if("2"===debugMode||"4"===debugMode){msg="DEDM: "+timeStampMS()+" -> "+func+": function end. (internal call)";if(void 0!==args&&""!==args){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: gray"),"object"==typeof args){arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: gray")}else console.log("%c"+args,"color: gray");console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: gray")}console.log("%c"+msg,"color: gray"),"4"!==debugMode&&"3"!==debugMode||console.groupEnd()}});this.addItem=makeSafe(function(attribute,value){if(functionStart("addItem",{attribute:attribute,value:value},1,"e"),"product"===attribute)$ddo.product.items.push(value);else if("cart"===attribute)$ddo.cart.items.push(value);else{if("transaction"!==attribute)throw'You can only add an item to product, cart or transaction. The first parameter to addItem must be one of these values. Syntax: ddo.addProduct( attribute, value ). attribute is "product", "cart" or "transaction". value is an object literal containing item details.';$ddo.transaction.items.push(value)}return functionEnd("addItem",value,1,"e"),value}),this.getItem=makeSafe(function(attribute,index){functionStart("getItem",{attribute:attribute,index:index},1,"e");var items=null;if("product"===attribute)items=$ddo.product.items;else if("cart"===attribute)items=$ddo.cart.items;else{if("transaction"!==attribute)throw'You can only get items from product, cart or transaction. The first parameter to getItem must be one of these values. Syntax: ddo.getItem( attribute, index ). attribute is "product", "cart" or "transaction".  The second parameter is optional - it is the zero-based-index of the desired item.  If not present then all items are returned.';items=$ddo.transaction.items}return void 0!==index&&0==isNaN(index)&&index>-1&&index<items.length?items[index]:(functionEnd("getItem",items,1,"e"),items)}),this.clearItems=function(attribute){if(functionStart("clearItems",{attribute:attribute},1,"e"),"product"===attribute)$ddo.product.items=[];else if("cart"===attribute)$ddo.cart.items=[];else{if("transaction"!==attribute)throw'You can only clear items from product, cart or transaction. The parameter to clearItems must be one of these values. Syntax: ddo.clearItems( attribute ). attribute is "product", "cart" or "transaction"';$ddo.transaction.items=[]}functionEnd("getItem",void 0,1,"e")};var sortByEventOrderASC=makeSafe(function(arr){return arr.sort(function(a,b){return a._evtOrder-b._evtOrder})}),sortByTimestampASC=(makeSafe(function(arr){return arr.sort(function(a,b){return b._evtOrder-a._evtOrder})}),makeSafe(function(arr){return arr.sort(function(a,b){return a._evtTimestampJS-b._evtTimestampJS})})),sortByTimestampDESC=makeSafe(function(arr){return arr.sort(function(a,b){return b._evtTimestampJS-a._evtTimestampJS})});this.getLastEvent=makeSafe(function(){return $ddo.events[$ddo.events.length-1]}),this.getEventsToBeProcessed=makeSafe(function(){return _eventsToBeProcessed}),this.setProcessedEvent=makeSafe(function(evtOrder,action){var aAllEvents=sortByEventOrderASC(_eventsToBeProcessed);if("handled"==action)for(var i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._evt_DTM_InEventHandler=1);if("wtconditionprocessed"==action)for(i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._wtConditionProcessed=1);if("delete"==action)for(i=0;i<_eventsToBeProcessed.length;i++)_eventsToBeProcessed[i]._evtOrder==evtOrder&&_eventsToBeProcessed.splice(i,1)}),this.version=makeSafe(function(p){switch(p){case"_api":return $me.getVar("version.api");case"_config":return $me.getVar("version.config");case"_w3c":return $me.getVar("version.w3c");default:return $me.getVar("version")}});makeSafe(function(loc){if(0===findChar("edm.",loc)||findChar(".attributes.",loc)>-1)deleteData(loc);else{var cfg=$me.getConfig(loc);void 0!==cfg._default?_setVar(loc,"function"==typeof cfg._default?cfg._default():cfg._default):deleteData(loc)}});this.clearVar=makeSafe(function(loc){functionStart("clearVar",loc,1,"e");var result=$clearVar(loc);return functionEnd("clearVar",result,1,"e"),result});var _clearVar=makeSafe(function(loc){functionStart("_clearVar",loc,1,"i");var result=$clearVar(loc);return functionEnd("_clearVar",result,1,"i"),result}),$clearVar=makeSafe(function(loc){if(void 0===loc)throw'clearVar requires a data layer location or keyword "_all"';if("string"==typeof loc)"_all"===loc?$ddo={}:deleteData(loc);else{if("object"!=typeof loc)throw"clearVar: function argument was not understood.";for(var k in loc)$clearVar(loc[k])}return initializeRequiredVariables(),doDefaultsByLocation(loc),!0}),doDefaultsByLocation=makeSafe(function(loc){functionStart("doDefaultsByLocation: "+loc,loc,2,"i");var o=strToRef("_all"===loc?"$config":"$config."+loc);if(validateConfig(o))return void 0!==o._default?(_setVar(loc,"function"==typeof o._default?o._default():o._default),functionEnd("doDefaultsByLocation: "+loc,!0,2,"i"),!0):(functionEnd("doDefaultsByLocation: "+loc,!0,2,"i"),!1);if("object"==typeof o)for(var k in o)doDefaultsByLocation("_all"===loc?k:loc+"."+k);functionEnd("doDefaultsByLocation: "+loc,"undefined",2,"i")}),$getTimeBetween=function(d1,d2){if("object"==typeof d1)var d1Ms=d1.getTime();else d1Ms=d1;if("object"==typeof d2)var d2Ms=d2.getTime();else d2Ms=d2;var diffInMS=Math.abs(d2Ms-d1Ms);diffInMS/=1e3;var seconds=Math.floor(diffInMS%60);diffInMS/=60;var minutes=Math.floor(diffInMS%60);diffInMS/=60;var hours=Math.floor(diffInMS%24);return{days:Math.floor(diffInMS/24),hours:hours,minutes:minutes,seconds:seconds}},$clearEventsToBeProcessed=makeSafe(function(){for(var aTmp=[],i=0;i<_eventsToBeProcessed.length;i++)1==_eventsToBeProcessed[i]._processedByAdobe&&1==_eventsToBeProcessed[i]._processedByWT&&aTmp.push(_eventsToBeProcessed[i]._evtOrder);for(i=0;i<aTmp.length;i++)ddo.setProcessedEvent(aTmp[i],"delete")}),$addToDL=makeSafe(function(evt){$me.getEventByNum($ddo.events,evt._evtOrder)||$ddo.events.push(evt)}),$addToImpressions=makeSafe(function(page,evt){$me.getEventByNum(_oImpressions[page],evt._evtOrder)||void 0!==evt._evtOrder&&_oImpressions[page].push(evt)}),$clearImpressions=makeSafe(function(){if(!function(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}(_oImpressions)){var oTmp={};for(var page in _oImpressions)if(_oImpressions.hasOwnProperty(page))for(var item=0;item<_oImpressions[page].length;item++)void 0===oTmp[page]&&(oTmp[page]=[]),0==_oImpressions[page][item]._processedByAdobe&&0==_oImpressions[page][item]._processedByWT&&oTmp[page].push(_oImpressions[page][item]);_oImpressions=oTmp}}),_checkForOldEvents=makeSafe(function(){functionStart("_checkForOldEvents: start",void 0,1,"e"),void 0!==$config.settings.checkEventInterval&&0!=$config.settings.checkEventInterval&&(window.ddoCheckEventInterval=setInterval($checkForOldEvents,1e3*$config.settings.checkEventInterval)),functionEnd("_checkForOldEvents: end",void 0,1,"e")}),$checkForOldEvents=makeSafe(function(){var now=makeTimestamp(),aTimerEvents=[],aTime={},secondsDiff=0,aOldEvents=[],timerFlag=!1,aTimerEventNums=[];if(null!=$me.getCacheVar("events")){aTimerEvents=sortByTimestampASC($me.getCacheVar("events"));_removeCacheVar("events")}for(var i=0;i<aTimerEvents.length;i++)aTimerEventNums.push(aTimerEvents[i]._evtOrder);for(var page in $clearImpressions(),_oImpressions)if(_oImpressions.hasOwnProperty(page)){var aEvts=_oImpressions[page];for(var evt in aEvts)aEvts.hasOwnProperty(evt)&&(0==aTimerEventNums.length?aTimerEvents.push(aEvts[evt]):-1==aTimerEventNums.indexOf(aEvts[evt]._evtOrder)&&aTimerEvents.push(aEvts[evt]))}if($clearImpressions(),$clearEventsToBeProcessed(),void 0!==aTimerEvents&&aTimerEvents.length>0)for(i=0;i<aTimerEvents.length;i++)if(secondsDiff=(aTime=$getTimeBetween(aTimerEvents[i]._evtTimestampJS,now)).seconds+60*aTime.minutes+3600*aTime.hours,1!=aTimerEvents[i]._processedDueToTime&&"formSubmit"!=aTimerEvents[i].eventAction&&secondsDiff>=$config.settings.clearEventsOlderThan||"formSubmit"==aTimerEvents[i].eventAction&&secondsDiff>=$config.settings.clearFormSubmitsOlderThan){void 0===aTimerEvents[i]._evtOrder&&(aTimerEvents[i]._evtOrder=++_eventOrder);for(var j=0;j<aTimerEvents.length;j++)"impression"==aTimerEvents[j].eventAction&&(void 0===_oImpressions[aTimerEvents[j]._evtPageName]&&(_oImpressions[aTimerEvents[j]._evtPageName]=[]),$addToImpressions(aTimerEvents[j]._evtPageName,aTimerEvents[j]));aOldEvents.push(aTimerEvents[i]),$addToDL(aTimerEvents[i]),timerFlag=!0}else"impression"==aTimerEvents[i].eventAction&&timerFlag?(aTimerEvents[i]._evtOrder=++_eventOrder,$addToImpressions(aTimerEvents[i]._evtPageName,aTimerEvents[i]),$addToDL(aTimerEvents[i])):pushCacheEvent(aTimerEvents[i]);for(i=0;i<aOldEvents.length;i++)aOldEvents[i]._processedDueToTime=1,aOldEvents[i]._sendHitNow=1,_eventsToBeProcessed.push(aOldEvents[i]),sendEvents(aOldEvents[i].eventAction,aOldEvents[i].eventCode)});this.pullEventsFromCache=doSessionStorage(function(evtAction){return void 0===evtAction&&(evtAction="no action defined"),$me.squawk("pullEventsFromCache: pulling: "+evtAction+" events from cache.",1,"e"),$pullEventsFromCache(evtAction),!0});var $pullEventsFromCache=makeSafe(function(evtAction){if(void 0!==evtAction){_flushEventCache();for(var i=0;i<$ddo.events.length;i++)$ddo.events[i].eventAction==evtAction?_eventsToBeProcessed.push($ddo.events[i]):($ddo.events.splice(i,1),pushCacheEvent($ddo.events[i]))}return!0});makeSafe(function(){for(var aTmp=[],i=_eventsToBeProcessed.length-1;i>=0;i--)aTmp.push(_eventsToBeProcessed[i]._evtOrder);return aTmp});this.stopTimer=makeSafe(function(){clearInterval(window.ddoCheckEventInterval)}),this.startTimer=makeSafe(function(){void 0!==$config.settings.checkEventInterval&&0!=$config.settings.checkEventInterval&&(window.ddoCheckEventInterval=setInterval($checkForOldEvents,1e3*$config.settings.checkEventInterval))});var initializeRequiredVariables=makeSafe(function(){return functionStart("initializeRequiredVariables",void 0,2,"i"),void 0===$ddo.events&&($ddo.events=[]),void 0===$ddo.product&&($ddo.product={}),void 0===$ddo.product.items&&($ddo.product.items=[]),void 0===$ddo.cart&&($ddo.cart={}),void 0===$ddo.edm&&($ddo.edm={}),void 0===$ddo.cart.items&&($ddo.cart.items=[]),void 0===$ddo.transaction&&($ddo.transaction={}),void 0===$ddo.transaction.items&&($ddo.transaction.items=[]),void 0===$ddo.version&&($ddo.version={}),void 0===$ddo.version.api&&($ddo.version.api="20180620 prod"),$me.squawk2("DEDM: Setting: version.api = "+$ddo.version.api),void 0===$ddo.version.config&&($ddo.version.config=$config.version.config),$me.squawk2("DEDM: Setting: version.config = "+$ddo.version.config),void 0===$ddo.version.w3c&&($ddo.version.w3c=$config.version.w3c),$me.squawk2("DEDM: Setting: version.w3c = "+$ddo.version.w3c),void 0===$ddo.user&&($ddo.user={}),void 0===$ddo.user.tech&&($ddo.user.tech={}),void 0===$ddo.user.tech.language&&($ddo.user.tech.language=$config.user.tech.language._default()),$me.squawk2("DEDM: Setting: user.tech.language = "+$ddo.user.tech.language),void 0===$ddo.user.tech.userAgent&&($ddo.user.tech.userAgent=$config.user.tech.userAgent._default()),$me.squawk2("DEDM: Setting: user.tech.userAgent = "+$ddo.user.tech.userAgent),void 0===$ddo.page&&($ddo.page={}),void 0===$ddo.page.pageInfo&&($ddo.page.pageInfo={}),void 0===$ddo.page.pageInfo.pageTitle&&($ddo.page.pageInfo.pageTitle=$config.page.pageInfo.pageTitle._default()),$me.squawk2("DEDM: Setting: page.pageInfo.pageTitle = "+$ddo.page.pageInfo.pageTitle),void 0===$ddo.page.location&&($ddo.page.location={}),void 0===$ddo.page.location.queryString&&($ddo.page.location.queryString=void 0!==$ddo._pageLocation&&void 0!==$ddo._pageLocation.query&&"string"==typeof $ddo._pageLocation.query?$ddo._pageLocation.query:""),void 0===$ddo.page.location.path&&($ddo.page.location.path=void 0!==$ddo._pageLocation&&"string"==typeof $ddo._pageLocation.path?$ddo._pageLocation.path:""),$me.squawk2("DEDM: Setting: page.locaiton.queryString = "+$ddo.page.location.queryString),functionEnd("initializeRequiredVariables",void 0,2,"i"),!0}),init=makeSafe(function(){functionStart("init: initializing the data manager",void 0,1,"e"),void 0!==Array.prototype.toJSON&&delete Array.prototype.toJSON,$initTimestamp=makeTimestamp(),$me.squawk("init: Data Manager initialized at "+$initTimestamp,1,"e"),setPageLocation(),initializeRequiredVariables(),setDefaultHandlers(),_loadDefaultsDynamic(),_loadDefaultsInit(),_checkForOldEvents(),"private"===sessionStorage.getItem("$ddo.settings.testingEnabled")&&$me.enableTest("private"),functionEnd("init: done initializing the data manager",!0,1,"e")});this.buildGovernedPassThrough=makeSafe(function(evtNum){functionStart("buildGovernedPassThrough",void 0,1,"e");var result=$buildGovernedPassThrough(evtNum);return functionEnd("buildGovernedPassThrough",result,1,"e"),result}),this.buildPassThrough=makeSafe(function(vars,evtNum){functionStart("buildPassThrough",{vars:vars},1,"e");var result=$buildPassThrough(vars,evtNum);return functionEnd("buildPassThrough",result,1,"e"),result}),this.buildPassThroughExclusion=makeSafe(function(vars){functionStart("buildPassThroughExclusion",{vars:vars},1,"e");var result=$buildPassThroughExclusion(vars);return functionEnd("buildPassThroughExclusion",result,1,"e"),result});var $cleanPassThroughVal=makeSafe(function(val){return"string"==typeof val&&(val=val.replace(/\\n/g,"").replace(/\\'/g,"").replace(/\\"/g,"").replace(/\\&/g,"").replace(/\\r/g,"").replace(/\\t/g,"").replace(/\\b/g,"").replace(/\\f/g,"")),val}),$buildPassThrough=makeSafe(function(vars,evtNum){for(var cursor=0,arrPassThrough=[],str="",objPassThrough={events:[]},v=0;v<vars.length;v++)if("events"===vars[v])void 0===evtNum?objPassThrough.events=$me.getEvents():objPassThrough.events[0]=$me.getEventByNum($ddo.events,evtNum);else{var val=$me.getVar(vars[v]);if(void 0!==val&&isAcceptablePassThroughValue(val)){for(var nodes=vars[v].split("."),i=(cursor=objPassThrough,0);i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];cursor[arrayLast(nodes)]=$cleanPassThroughVal(val)}}for(i=objPassThrough.events.length-1;i>=0;i--)for(var key in objPassThrough.events[i])Object.prototype.hasOwnProperty.call(objPassThrough.events[i],key)&&(isAcceptablePassThroughValue(objPassThrough.events[i][key])?objPassThrough.events[i][key]=$cleanPassThroughVal(objPassThrough.events[i][key]):delete objPassThrough.events[i][key]);for(var JSONPassThrough=escape($stringify(objPassThrough));JSONPassThrough.length>0;)str=JSONPassThrough.substr(0,125),arrPassThrough.push(str),JSONPassThrough=JSONPassThrough.substr(125);var result=arrPassThrough.join("\\");return result=$cleanPassThroughVal(result)}),$buildGovernedPassThrough=makeSafe(function(evtNum){for(var vars=getPassThroughDefinitions(),cursor=0,objPassThrough={events:[]},v=0;v<vars.length;v++)if("events"===vars[v])void 0===evtNum?objPassThrough.events=$me.getEvents():objPassThrough.events[0]=$me.getEventByNum($ddo.events,evtNum);else{var val=$me.getVar(vars[v]);if(void 0!==val&&isAcceptablePassThroughValue(val)){for(var nodes=vars[v].split("."),i=(cursor=objPassThrough,0);i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];cursor[arrayLast(nodes)]=$cleanPassThroughVal(val)}}for(i=objPassThrough.events.length-1;i>=0;i--)for(var key in objPassThrough.events[i])Object.prototype.hasOwnProperty.call(objPassThrough.events[i],key)&&(isAcceptablePassThroughValue(objPassThrough.events[i][key])?objPassThrough.events[i][key]=$cleanPassThroughVal(objPassThrough.events[i][key]):delete objPassThrough.events[i][key]);var strPassThrough=$stringify(objPassThrough),dirtyPassThrough=escape(strPassThrough);return result=$cleanPassThroughVal(dirtyPassThrough),result}),isAcceptablePassThroughValue=makeSafe(function(value){var isAcceptable=!0;if("string"==typeof value){var lc=value.toLowerCase();""!==lc&&"unknown"!==lc&&"default"!==lc||(isAcceptable=!1)}return isAcceptable});this.printEdd=makeSafe(function(){var configObj=getFlatConfig();if(advancedConsole)console.table(configObj);else if(!noConsole)for(var i=0;i<configObj.length;i++)console.log(configObj[i]["config attribute"])});var $buildPassThroughExclusion=makeSafe(function(vars,evtNum){var combinedVars,cursor=0,arrPassThrough=[],str="",objPassThrough={},aDDO=getFlatDataLayer(),cleanedDDO=[],regExVars="";combinedVars=vars.join("|"),regExVars=new RegExp(combinedVars);for(var i=0;i<aDDO.length;i++)regExVars.test(aDDO[i]["data layer attribute"])||cleanedDDO.push(aDDO[i]["data layer attribute"]+'","'+aDDO[i].value+'"\n');var text="";for(i=0;i<aDDO.length;i++)text=text+'"'+aDDO[i]["data layer attribute"]+'","'+aDDO[i].value+'"\n';for(var v=0;v<vars.length;v++)if("events"===vars[v])objPassThrough.events=$me.getEvents();else{var val=$me.getVar(vars[v]);if(void 0!==val){var nodes=vars[v].split(".");for(cursor=objPassThrough,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];cursor[arrayLast(nodes)]=val}}for(var JSONPassThrough=$stringify(objPassThrough);JSONPassThrough.length>0;)str=JSONPassThrough.substr(0,125),arrPassThrough.push(str),JSONPassThrough=JSONPassThrough.substr(125);return arrPassThrough.join("\\")}),strToRef=makeSafe(function(loc){var bits=loc.split("."),cursor=void 0;if("$ddo"===bits[0])cursor=$ddo;else{if("$config"!==bits[0])throw'strToRef: argument loc must begin with "$ddo" or "$config"';cursor=$config}if(1===bits.length)return cursor;for(var i=1;i<bits.length;i++){if(void 0===cursor[bits[i]])return;cursor=cursor[bits[i]]}return cursor}),getEventInstructions=makeSafe(function(evt,evtDetails){var href=window.location.href;functionStart("getEventInstructions");for(var entry,eventActions=$config._globalEventActions,eventActionsX=$config._eventActionsExceptions,results="",urlParts=[],i=0;i<eventActionsX.length;i++)if(entry=eventActionsX[i],urlParts=edmDataManager.getURLParts(href),wildcardMatch(entry.filepath,urlParts.filepath)&&wildcardMatch(entry.host,urlParts.host)&&(void 0===entry.protocol||wildcardMatch(entry.protocol,urlParts.protocol))&&0!=(results=processEventActions(evt,entry._eventActions)))return void 0!==entry.logConsole?results.logConsole=entry.logConsole:results.logConsole=!1,functionEnd("getEventInstructions",results),results;return results=processEventActions(evt,eventActions),functionEnd("getEventInstructions",results),results}),getSiteSettings=makeSafe(function(){for(var entry,href=window.location.href,eventActionsX=$config._eventActionsExceptions,urlParts=[],i=0;i<eventActionsX.length;i++)if(entry=eventActionsX[i],urlParts=edmDataManager.getURLParts(href),wildcardMatch(entry.filepath,urlParts.filepath)&&wildcardMatch(entry.host,urlParts.host)&&(void 0===entry.protocol||wildcardMatch(entry.protocol,urlParts.protocol)))return entry._settings;return!1}),wildcardMatch=makeSafe(function(pattern,str){if(1===pattern.length&&"*"===pattern.charAt(0)&&pattern.charAt(pattern.length-1))return!0;if(str.indexOf("http")>-1){var aUrlParts=edmDataManager.getURLParts(str);str=aUrlParts.host+aUrlParts.filepath}if(-1==pattern.indexOf("|"))pattern="*"===(pattern="*"===pattern.charAt(0)?pattern.slice(1,pattern.length):"^"+pattern).charAt(pattern.length-1)?pattern.slice(0,pattern.length-1):pattern.slice(0,pattern.length)+"$";else{aPattern=pattern.split("|");for(var i=0;i<aPattern.length;i++)"*"===aPattern[i].charAt(0)&&(aPattern[i]=aPattern[i].slice(1,aPattern[i].length)),"*"===aPattern[i].charAt(aPattern[i].length-1)&&(aPattern[i]=aPattern[i].slice(0,aPattern[i].length-1));pattern=aPattern.join("|")}return new RegExp(pattern,"i").test(str)}),createDebugFunctions=makeSafe(function(){$me.test={wildcardMatch:makeSafe(function(str,pattern){return wildcardMatch(str,pattern)}),dumpConfig:makeSafe(function(){return $config}),loadNewConfig:makeSafe(function(filename){var newConfig=document.createElement("script");newConfig.setAttribute("type","text/javascript"),newConfig.setAttribute("src",filename),document.head.appendChild(newConfig)}),sortByTimestampDESC:makeSafe(function(arr){return sortByTimestampDESC(arr)}),getType:makeSafe(function(o){return getType(o)}),getLatestEvents:makeSafe(function(){return getLatestEvents()}),getURLParts:makeSafe(function(href){return edmDataManager.getURLParts(href)})}}),destroyDebugFunctions=makeSafe(function(){functionStart("destroyDebugFunctions",void 0,2,"i"),void 0!==$me.test&&delete $me.test,functionEnd("destroyDebugFunctions",void 0,2,"i")});init()}
/*
docReady: Plain javascript replacement for jQuery's .ready() so code can be scheduled to run when the document is ready
https://github.com/jfriend00/docReady

*****
README:
docReady is a single plain javascript function that provides a method of
scheduling one or more javascript functions to run at some later
point when the DOM has finished loading.

It works similarly to jQuery's $(document).ready(), but this is a small
single standalone function that does not require jQuery in any way.

*****
LICENSE:
The MIT License (MIT)

Copyright (c) 2014, John Friend

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
/*
docReady: Plain javascript replacement for jQuery's .ready() so code can be scheduled to run when the document is ready
https://github.com/jfriend00/docReady

*****
README:
docReady is a single plain javascript function that provides a method of
scheduling one or more javascript functions to run at some later
point when the DOM has finished loading.

It works similarly to jQuery's $(document).ready(), but this is a small
single standalone function that does not require jQuery in any way.

*****
LICENSE:
The MIT License (MIT)

Copyright (c) 2014, John Friend

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
!function(funcName,baseObj,internal){funcName=funcName||"docReady",baseObj=baseObj||window;var readyList=[],readyFired=!1,readyEventHandlersInstalled=!1;function ready(){if(!readyFired){readyFired=!0;for(var signaledInternal=!1,i=0;i<readyList.length;i++)readyList[i].fn.call(window,readyList[i].ctx),1==readyList[i].ctx.internal&&(signaledInternal=!0);readyList=[],0==signaledInternal&&void 0!==window.docReady&&window.docReady.length<3&&(context={},context.docReady=!0,context.internal=internal||!1,window.docReady.call())}}function readyStateChange(){"complete"===document.readyState&&ready()}1==internal&&void 0!==window.docReady&&(context={},context.docReady=!0,context.internal=internal||!1,readyList.push({fn:window.docReady,ctx:context})),baseObj[funcName]=function(callback,context,internal){(context=context||{}).docReady=void 0!==window.docReady,context.internal=internal||!1,readyFired?setTimeout(function(){"function"==typeof callback&&callback(context)},1):(readyList.push({fn:callback,ctx:context}),"complete"===document.readyState?setTimeout(ready,1):readyEventHandlersInstalled||(document.addEventListener?(document.addEventListener("DOMContentLoaded",ready,!1),window.addEventListener("load",ready,!1)):(document.attachEvent("onreadystatechange",readyStateChange),window.attachEvent("onload",ready)),readyEventHandlersInstalled=!0))},edmDataManager.getURLParts=function(href){var urlParts={};return bits=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(href),void 0!==bits[12]&&0!=bits[12].length||void 0!==bits[6]&&bits[6].length>0&&bits[6].toLowerCase().indexOf("directvnow.com")>-1&&(href2=href.replace(";","?"),bits2=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(href2),void 0!==bits2[12]&&bits2[12].length>0&&(bits=bits2)),urlParts.protocol=bits[1],urlParts.host=bits[6],urlParts.filepath=bits[9]+(void 0!==bits[13]?"#"+bits[13]:""),urlParts.source=bits[0],urlParts.authority=bits[2],urlParts.userInfo=bits[3],urlParts.user=bits[4],urlParts.password=bits[5],urlParts.port=bits[7],urlParts.relative=bits[8],urlParts.path=bits[9],urlParts.directory=bits[10],urlParts.file=bits[11],urlParts.query=bits[12],urlParts.anchor=bits[13],urlParts}}("docReady",window,!0),edmDataManager.chatStateEnumeration={offline:"offline",available:"available",busy:"busy"};