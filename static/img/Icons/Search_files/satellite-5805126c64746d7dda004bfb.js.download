_satellite.pushAsyncScript(function(event,target,$variables){var uuid=_satellite.readCookie("UUID");if(void 0===ddo.getVar("chat.ismindicator")&&null!=uuid&&5<=uuid.length){var nonceRequest=new XMLHttpRequest;nonceRequest.open("GET","//www.att.com/xp/cosc/services/getcsrftoken",!0),nonceRequest.setRequestHeader("applicationID","dataLayerAppId"),nonceRequest.setRequestHeader("exp-consumer-key","datalayer"),nonceRequest.onerror=function(e){console.log("Unable to contact the xp env "+e.target.status)},nonceRequest.onreadystatechange=function(){if(nonceRequest.readyState==XMLHttpRequest.DONE&&200===nonceRequest.status){var token=nonceRequest.getResponseHeader("x-csrf-token");if("undefined"!==token){var ismRequest=new XMLHttpRequest;ismRequest.open("GET","//www.att.com/xp/cosc/services/"+uuid+"/UniversalPersonalizationProfile/universalPublicTransient",!0),ismRequest.setRequestHeader("applicationID","dataLayerAppId"),ismRequest.setRequestHeader("exp-consumer-key","datalayer"),ismRequest.setRequestHeader("Accept","application/json"),ismRequest.setRequestHeader("x-csrf-token",token),ismRequest.onerror=function(e){console.log("Unable to contact the COSC env "+e.target.status)},ismRequest.onreadystatechange=function(){if(ismRequest.readyState==XMLHttpRequest.DONE&&200===this.status){var indicator=!1,json=JSON.parse(ismRequest.responseText);if(json.UniversalPersonalizationProfile){var valueArray=json.UniversalPersonalizationProfile.universalPublicTransient.valueArray;if(void 0!==valueArray)for(var i=0,len=valueArray.length;i<len;i++)if(valueArray[i].ISM&&0===valueArray[i].ISM.localeCompare("Y")){indicator=!0;break}}ddo.setVar("chat.ismindicator",indicator),ddo.broadcastCustomEvent("DM_Event",{eventType:"COSC_SYNC",eventCode:"CHAT_ISM_INDICATOR",eventOrder:-1})}},ismRequest.send()}}},nonceRequest.send()}});
//# sourceMappingURL=satellite-5805126c64746d7dda004bfb.js.map